(window.webpackJsonp=window.webpackJsonp||[]).push([[368],{O6H6:function(e,t,n){"use strict";var a=n("vOnD"),i=n("u9kb"),o=n("aOgs"),l=n("q1tI"),r=n.n(l),s=n("7ljp"),c=n("pD55"),u=n("8Aig"),b=n("ReZb"),p=n("GCVy"),m=n("+6vE");var d=function(e){var t=e.children;return r.a.createElement(i.d,{as:"pre",mt:0,mb:3,p:3,border:0,style:{color:"rgb(57, 58, 52)",backgroundColor:"rgb(246, 248, 250)",overflow:"auto"}},r.a.createElement(i.s,{fontFamily:"mono",fontSize:1},t))};var h=function(e){var t=e.children;return r.a.createElement("strong",null,t)},O=n("gnlW"),f=n("mwnC"),g=n("/Rw0"),y=n("dVM4"),j=Object(a.f)(i.e).withConfig({displayName:"table-of-contents___StyledBox",componentId:"eay2b8-0"})({listStyle:"none",lineHeight:"1.4em"});function w(e){var t=e.items,n=e.depth;return r.a.createElement(j,{key:t,as:"ul",m:0,p:0},t.map((function(e){return r.a.createElement(i.e,{as:"li",key:e.url,pl:n>0?3:0},r.a.createElement(i.n,{key:e.title,display:"inline-block",py:1,href:e.url,color:"gray.6"},e.title),e.items?r.a.createElement(w,{items:e.items,depth:n+1}):null)})))}w.defaultProps={depth:0};var v=w,N=n("MfeC");function k(e){var t=N.a.getPath(e.location.pathname),n=N.a.getVariantAndPage(e.root,t);if(!n)return null;var a=N.a.getVariantsForPage(e.root,n.page),o=[],l=a[0];return 0===a.length?null:(a.forEach((function(e){e.page.url===t&&(l=e),o.push(r.a.createElement(i.i.Item,{onClick:function(){window.location.href=e.page.url},key:e.variant.title},e.variant.title))})),r.a.createElement(i.i,{overlay:e.overlay},r.a.createElement(i.i.Button,null,l.variant.title),r.a.createElement(k.Menu,{direction:e.direction,width:e.menuWidth},o)))}k.Menu=Object(a.f)(i.i.Menu).withConfig({displayName:"variant-select__Menu",componentId:"sc-1rmksyl-0"})(["width:",";"],(function(e){return e.width?e.width:"160px"}));var S=k,E=Object(a.f)(i.k).withConfig({displayName:"layout___StyledFlex",componentId:"sc-1xkoyzi-0"})({zIndex:0}),C=Object(a.f)(i.l).withConfig({displayName:"layout___StyledGrid",componentId:"sc-1xkoyzi-1"})({alignItems:"start",alignSelf:"start"}),A=Object(a.f)(i.e).withConfig({displayName:"layout___StyledBox",componentId:"sc-1xkoyzi-2"})({gridArea:"heading"}),x=Object(a.f)(i.e).withConfig({displayName:"layout___StyledBox2",componentId:"sc-1xkoyzi-3"})({"margin-top":"25px"}),P=Object(a.f)(i.o).withConfig({displayName:"layout___StyledPosition",componentId:"sc-1xkoyzi-4"})({gridArea:"table-of-contents",overflow:"auto"}),T=Object(a.f)(i.e).withConfig({displayName:"layout___StyledBox3",componentId:"sc-1xkoyzi-5"})({gridArea:"content"});t.a=function(e){var t=e.children,n=e.pageContext,a=e.location,l=n.frontmatter,j=l.title,w=l.description,k=l.status,W=l.source,I=l.additionalContributors,_=void 0===I?[]:I,D=N.a.getVariantRoot(a.pathname);return r.a.createElement(s.a,{components:{Index:b.a,Note:p.a,Prompt:d,PromptReply:h,Screenshot:O.a}},r.a.createElement(i.k,{flexDirection:"column",minHeight:"100vh"},r.a.createElement(c.a,{title:j,description:w}),r.a.createElement(u.b,{location:a,isSearchEnabled:n.isSearchEnabled}),r.a.createElement(E,{flex:"1 1 auto",flexDirection:"row"},r.a.createElement(i.e,{display:["none",null,null,"block"]},r.a.createElement(f.a,{editOnGitHub:n.themeOptions.editOnGitHub,location:a})),r.a.createElement(C,{id:"skip-nav",maxWidth:"100%",gridTemplateColumns:["100%",null,"minmax(0, 65ch) 220px"],gridTemplateAreas:['"heading" "content"',null,'"heading table-of-contents" "content table-of-contents"'],gridColumnGap:[null,null,6,7],gridRowGap:3,mx:"auto",p:[5,6,null,7]},r.a.createElement(A,null,r.a.createElement(i.d,{borderWidth:0,borderBottomWidth:1,borderRadius:0,pb:2},r.a.createElement(i.e,null,r.a.createElement(i.e,null,r.a.createElement(i.m,{as:"h1"},j),w))),null!=D?r.a.createElement(x,null,r.a.createElement(S,{overlay:!0,direction:"se",menuWidth:"min(30ch, 500px)",root:D,location:a})):null),n.tableOfContents.items?r.a.createElement(P,{display:["none",null,"block"],position:"sticky",top:u.a+24,mt:"6px",maxHeight:"calc(100vh - "+u.a+"px - 24px)"},r.a.createElement(i.s,{display:"inline-block",fontWeight:"bold",mb:1},"Table of contents"),r.a.createElement(v,{items:n.tableOfContents.items})):null,r.a.createElement(T,null,k||W?r.a.createElement(i.k,{mb:3,alignItems:"center"},k?r.a.createElement(y.a,{status:k}):null,r.a.createElement(i.e,{mx:"auto"}),W?r.a.createElement(g.a,{href:W}):null):null,n.tableOfContents.items?r.a.createElement(i.e,{display:["block",null,"none"],mb:3},r.a.createElement(i.h,null,(function(e){var t=e.open;return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.s,{as:"summary",fontWeight:"bold"},t?r.a.createElement(i.r,{icon:o.b,mr:2}):r.a.createElement(i.r,{icon:o.c,mr:2}),"Table of contents"),r.a.createElement(i.e,{pt:1},r.a.createElement(v,{items:n.tableOfContents.items})))}))):null,t,r.a.createElement(m.a,{editOnGitHub:n.themeOptions.editOnGitHub,editUrl:n.editUrl,contributors:n.contributors.concat(_.map((function(e){return{login:e}})))}))))))}},eJW7:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return l})),n.d(t,"default",(function(){return c}));var a=n("zLVn"),i=(n("q1tI"),n("7ljp")),o=n("O6H6"),l={},r={_frontmatter:l},s=o.a;function c(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(i.b)(s,Object.assign({},r,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Outlined in this document are the practices and policies that npm\napplies to help ensure that we release stable/secure software, and\nreact appropriately to security threats when they arise."),Object(i.b)("h2",null,"Table of Contents"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",{parentName:"li",href:"#reporting-security-problems-to-npm"},"Reporting Security Problems to npm")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",{parentName:"li",href:"#security-point-of-contact"},"Security Point of Contact")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",{parentName:"li",href:"#onboarding-developers"},"Onboarding Developers")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",{parentName:"li",href:"#separation-of-duties-and-authorization"},"Separation of Duties and Authorization")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",{parentName:"li",href:"#critical-updates-and-security-notices"},"Critical Updates And Security Notices")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",{parentName:"li",href:"#responding-to-security-threats-and-critical-updates"},"Responding to Security Threats")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",{parentName:"li",href:"#vulnerability-scanning"},"Vulnerability Scanning")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",{parentName:"li",href:"#password-policies"},"Password Policies")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",{parentName:"li",href:"#application-design-best-practices"},"Application Design Best Practices")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",{parentName:"li",href:"#development-process"},"Development Process")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",{parentName:"li",href:"#antivirus-software"},"AntiVirus Software"))),Object(i.b)("h2",null,"Reporting Security Problems to npm"),Object(i.b)("p",null,"If you need to report a security vulnerability.  Please visit ",Object(i.b)("a",{parentName:"p",href:"https://npmjs.com/support"},"https://npmjs.com/support"),".\nIf your issue is specific to your account, such as lost credentials or problems with two-factor authentication, contacting ",Object(i.b)("a",{parentName:"p",href:"https://npmjs.com/support"},"our support team")," is more appropriate."),Object(i.b)("p",null,"We review all security reports on the next business day.  Note that\nthe npm staff is generally offline for most US holidays, but please do\nnot delay your report!  Our off-hours support staff can fix many\nissues, and will alert our security point of contact if needed."),Object(i.b)("h2",null,"Security Point of Contact"),Object(i.b)("p",null,"Any security tickets opened using ",Object(i.b)("a",{parentName:"p",href:"https://npmjs.com/support"},"https://npmjs.com/support"),"\nwill be escalated to the security point of contact, who will delegate incident response\nactivities as appropriate. This is the best and fastest way to contact npm about any security-related matter."),Object(i.b)("h2",null,"Onboarding Developers"),Object(i.b)("p",null,"All new technical hires are introduced to our security policy as part\nof the onboarding process."),Object(i.b)("h2",null,"Separation of Duties and Authorization"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Developers are only given access to key npm services when it's required for their job."),Object(i.b)("li",{parentName:"ul"},"IAM is used to limit the permissions on accounts, minimizing the damage that would be incurred if an account is compromised.")),Object(i.b)("h2",null,"Critical Updates And Security Notices"),Object(i.b)("p",null,"We learn about critical software updates and security threats from a\nvariety of sources:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Ubuntu's security notices page: ",Object(i.b)("a",{parentName:"li",href:"https://usn.ubuntu.com/"},"https://usn.ubuntu.com/")),Object(i.b)("li",{parentName:"ul"},"The Node.js mailing list."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"https://npmjs.com/support"},"Security tickets")," sent to us."),Object(i.b)("li",{parentName:"ul"},"and other media sources.")),Object(i.b)("h3",null,"Ubuntu Automatic Security Updates"),Object(i.b)("p",null,"Along with keeping an eye out for critical security updates, automatic\nsecurity updates are enabled on all of our production servers allowing\npatches to be applied immediately without human intervention."),Object(i.b)("p",null,Object(i.b)("a",{parentName:"p",href:"https://help.ubuntu.com/community/AutomaticSecurityUpdates"},"https://help.ubuntu.com/community/AutomaticSecurityUpdates")),Object(i.b)("h2",null,"Responding to Security Threats and Critical Updates"),Object(i.b)("p",null,"When a security threat is identified, we have the following process in\nplace:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"We have the slack channel ",Object(i.b)("inlineCode",{parentName:"li"},"security-all"),", which is used to\nprioritize and coordinate responses to security threats."),Object(i.b)("li",{parentName:"ol"},"Our ",Object(i.b)("a",{parentName:"li",href:"#security-point-of-contact"},"Security Point of Contact"),"\noversees this discussion: managing the triage, responding to\nemails, and updating npm's status page."),Object(i.b)("li",{parentName:"ol"},"Based on the triage, work is allocated to developers to address the\nthreat:")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"P0"),": Drop everything and fix!"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"P1"),": High severity, schedule work within 7 days."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"P2"),": Medium severity, schedule work within 30 days."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"P3"),": Low severity, fix within 180 days.")),Object(i.b)("h2",null,"Vulnerability Scanning"),Object(i.b)("p",null,"Along with reacting to security notifications as they happen, we\nproactively pen-test and audit software."),Object(i.b)("h3",null,"Internal Audits"),Object(i.b)("p",null,"We have a dedicated security team who perform ongoing penetration testing, code auditing, and other forms of security oversight."),Object(i.b)("p",null,"While working on features at npm, all engineers coordinate security\naudits with the ",Object(i.b)("a",{parentName:"p",href:"#security-point-of-contact"},"Security Point of Contact"),"."),Object(i.b)("p",null,"Documentation of our internal audits is available, and can be provided to customers when requested."),Object(i.b)("h3",null,"Automated Scanning"),Object(i.b)("p",null,"The cloud hosting platforms that we use provide options for automated\nvulnerability scanning."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"AWS: ",Object(i.b)("a",{parentName:"li",href:"https://aws.amazon.com/security/penetration-testing/"},"https://aws.amazon.com/security/penetration-testing/")),Object(i.b)("li",{parentName:"ul"},"Google Cloud: ",Object(i.b)("a",{parentName:"li",href:"https://cloud.google.com/security-scanner/"},"https://cloud.google.com/security-scanner/"))),Object(i.b)("h2",null,"Password Policies"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Enable 2FA on all npm related accounts."),Object(i.b)("li",{parentName:"ul"},"Passwords should be rolled every 90 days."),Object(i.b)("li",{parentName:"ul"},"Passwords should contain alpha-numeric characters and symbols."),Object(i.b)("li",{parentName:"ul"},"Passwords should be a minimum of 8 characters."),Object(i.b)("li",{parentName:"ul"},"Any systems we build that accept a username and password should\nreject a user after repeated failed login attempts.")),Object(i.b)("h3",null,"Don't Use Passwords"),Object(i.b)("p",null,"We should opt for alternative authentication methods when possible:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Asymmetric keys for connecting to servers."),Object(i.b)("li",{parentName:"ul"},"Delegated authentication (SAML, OAuth2, etc)."),Object(i.b)("li",{parentName:"ul"},"Opaque access tokens.")),Object(i.b)("h3",null,"SSH Keys"),Object(i.b)("p",null,"SSH keys should be rolled out selectively, providing developers access\nto only the servers that they require access to."),Object(i.b)("h2",null,"Application Design Best Practices"),Object(i.b)("p",null,"In the next section of the document, we discuss the design\nmethodologies that we use to build stable and secure software."),Object(i.b)("h3",null,"Logging Practices"),Object(i.b)("p",null,"Logs are important for both debugging applications and detecting\nsecurity breaches in our software."),Object(i.b)("h4",null,"What We Log"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"We should track failed login attempts to servers:",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"Ubuntu provides this information in ",Object(i.b)("em",{parentName:"li"},"/var/log/auth.log")))),Object(i.b)("li",{parentName:"ul"},"We should log the operations performed by users:"),Object(i.b)("li",{parentName:"ul"},"Ubuntu provides this information in ",Object(i.b)("em",{parentName:"li"},"history"),"."),Object(i.b)("li",{parentName:"ul"},"Applications should provide detailed operational logs in a\n",Object(i.b)("a",{parentName:"li",href:"https://github.com/ceejbot/common-log-string"},"standardized format"),".")),Object(i.b)("h4",null,"Log format"),Object(i.b)("p",null,"All applications should contain logging for ",Object(i.b)("inlineCode",{parentName:"p"},"date"),", ",Object(i.b)("inlineCode",{parentName:"p"},"time"),",\n",Object(i.b)("inlineCode",{parentName:"p"},"operation"),", and a ",Object(i.b)("inlineCode",{parentName:"p"},"unique request identifier"),"."),Object(i.b)("p",null,"We use\n",Object(i.b)("a",{parentName:"p",href:"https://github.com/ceejbot/common-log-string"},"common-log-string"),"\ninternally to standardize this:"),Object(i.b)("h4",null,"Backing Up Logs"),Object(i.b)("p",null,"At least 90 days of logs should be kept for each service. On high\ntraffic hosts this may require backing-up logs in cloud storage on a\nregular basis."),Object(i.b)("h4",null,"Reviewing Logs"),Object(i.b)("p",null,"On the servers that we manage for other companies, we should audit\nlogs on a regular basis."),Object(i.b)("h4",null,"Secrets in Logs"),Object(i.b)("p",null,"Logs should not contain any sensitive user information, e.g.,\npasswords."),Object(i.b)("p",null,"The module ",Object(i.b)("a",{parentName:"p",href:"https://www.npmjs.com/package/hide-secrets"},"hide-secrets"),"\nis used to help with this."),Object(i.b)("h3",null,"Limiting Access to Operating System Files"),Object(i.b)("p",null,"Micro-services should only have access to databases and files that\nthey need access to."),Object(i.b)("p",null,"With our docker-based infrastructure (npm Enterprise) this is achieved by\nhaving containers only mount folders on the root host that they\nrequire access to."),Object(i.b)("p",null,"In our production environment, this is achieved by partitioning\nservices across multiple hosts."),Object(i.b)("h3",null,"Security Groups"),Object(i.b)("p",null,"Security groups are used to limit the network connectivity between hosts."),Object(i.b)("p",null,'When deploying a service, ask: "what other services does this\nactually need to connect to?"'),Object(i.b)("h3",null,"Storage of Data"),Object(i.b)("p",null,"Any sensitive user information should be encrypted at rest. Using\n",Object(i.b)("a",{parentName:"p",href:"http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSEncryption.html"},"encrypted EBS\ndrives"),",\nor an equivalent, is a great way to achieve this."),Object(i.b)("h3",null,"Inter-Service Communication"),Object(i.b)("p",null,"Communication between services on the same host can be performed via\nHTTP."),Object(i.b)("p",null,"All inter-service communication between two hosts is performed using\nTLS."),Object(i.b)("h2",null,"Development Process"),Object(i.b)("p",null,"npm has a well-defined, security-focused, development process:"),Object(i.b)("h3",null,"Code Reviews"),Object(i.b)("p",null,"No code goes into production unless it is reviewed by at least one\nother developer."),Object(i.b)("p",null,'The onus is on the reviewer to ask hard questions: "what are the\nramifications of opening up port-X?", "why is this connection being\nmade over HTTP instead of HTTPS?"'),Object(i.b)("h3",null,"Deploying Updates"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Any new code pushed to production is first thoroughly tested in a\nstaging environment."),Object(i.b)("li",{parentName:"ul"},"Mechanisms are in place for rolling back any changes that are pushed\nto production.",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"If a schema-change is involved, an inverse migration is first\ntested in staging (we want to be confident that we should role\nthings back).")))),Object(i.b)("h3",null,"Unit Testing"),Object(i.b)("p",null,"We love testing at npm:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"During the code-review process, if you see logic that's complicated\nand lacks a test, politely ask the developer for a test."),Object(i.b)("li",{parentName:"ul"},"It's particularly important that tests are added to logic that\ninteracts with sensitive parts of the system: ACL logic, password\nvalidation, database access."),Object(i.b)("li",{parentName:"ul"},"Tests should not contain user-data, make sure to anonymize email\naddresses, usernames, etc."),Object(i.b)("li",{parentName:"ul"},"Test coverage is a great way to make sure all of the nooks and\ncrannies of your codebase are tested. npm maintains two tools for\ntest coverage internally ",Object(i.b)("a",{parentName:"li",href:"https://github.com/isaacs/node-tap"},"tap"),",\nand ",Object(i.b)("a",{parentName:"li",href:"https://github.com/bcoe/nyc"},"nyc"),"."),Object(i.b)("li",{parentName:"ul"},"Any new functionality should always come with a test to verify that\nit does what we think it does."),Object(i.b)("li",{parentName:"ul"},"Any bug fix should always come with a test so that we don't have to\nencounter the same bug multiple times.")),Object(i.b)("h3",null,"Design Cycle"),Object(i.b)("p",null,"The design process, and management techniques vary from team to team\nat npm.  Across the board, however, we strive to have continuous\ndeployments. Releasing many small features as they become production\nready."),Object(i.b)("p",null,"Security is taken into account during all phases of the software\ndevelopment life-cycle: unit tests think about potential threats; when\ntesting on staging, we attempt to test potential exploits, etc."),Object(i.b)("h2",null,"AntiVirus Software"),Object(i.b)("p",null,"On our managed Ubuntu hosts, we run the\n",Object(i.b)("a",{parentName:"p",href:"https://help.ubuntu.com/community/ClamAV"},"ClamAV")," AntiVirus software."),Object(i.b)("h3",null,"When A Virus Is Identified"),Object(i.b)("p",null,"The infected server should be retired, and a new server should be\nprovisioned from scratch."),Object(i.b)("h2",null,"Changes"),Object(i.b)("p",null,"This is a living document and may be updated from time to time.\nPlease refer to the ",Object(i.b)("a",{parentName:"p",href:"https://github.com/npm/documentation/blob/main/content/policies/security.mdx"},"git history for this\ndocument"),"\nto view the changes."),Object(i.b)("h2",null,"License"),Object(i.b)("p",null,"This document may be reused under a ",Object(i.b)("a",{parentName:"p",href:"https://creativecommons.org/licenses/by-sa/4.0/"},"Creative Commons\nAttribution-ShareAlike\nLicense"),"."))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---content-policies-security-mdx-a2025f982bcefa49f0f7.js.map